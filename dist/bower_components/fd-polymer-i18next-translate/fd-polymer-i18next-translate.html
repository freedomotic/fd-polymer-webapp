<link rel="import" href="../polymer/polymer.html">

<!--
Element providing solution to no problem in particular.

##### Example

    <fd-translate></fd-translate>

@element fd-translate
@blurb Element providing filter to translate strings using i18next library.
@status alpha
@homepage http://polymerlabs.github.io/fd-polymer-i18next-translate
-->

<script src="../i18next/i18next.js"></script>
<script>

  function postInit() {

    PolymerExpressions.prototype.translate = function(key, extra) {
      if (key) {
        var lower_key = key.toLowerCase();
        //console.log(i18n.t("app.name") + ": " + key);
        var translation;
        if (!!extra) {
          translation = i18n.t(key, {
            "var": extra
          });
        }
        else {
          translation = i18n.t(lower_key);
        }
        if (!!translation) {
          return translation;
        }
        else {
          return " _|" + lower_key + "|_ ";
        }
      }
      else {
        return "[O_O]";
      }
    };

    PolymerExpressions.prototype.upperCase = function(text) {
      return text.toUpperCase();
    };
  };

  i18n.init({
      // debug: true,
      fallbackLng: false,
      getAsync: false,
      resGetPath: './__ns__/__lng__.json'
    },
    postInit
  );
/*  i18n.init({
      // debug: true,
      fallbackLng: false,
      getAsync: false,
      resGetPath: './bower_components/fd-polymer-i18next-translate/__ns__/__lng__.json'
    },
    postInit
  ); */
</script>
